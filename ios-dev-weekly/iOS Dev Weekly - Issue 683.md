# [iOS Dev Weekly - Issue 683](https://iosdevweekly.com/issues/683)

## Comment

- macOS15 ã§ç”»é¢éŒ²ç”»ã®è¨±å¯ç”»é¢ãŒç¹°ã‚Šè¿”ã—å‡ºã‚‹å•é¡Œã€ã‚„ã£ã±ã‚¢ãƒ¬ã ã‚ˆã­ãƒ¼ã¨ã„ã†è©±
- 15.1 ã§å®šæœŸçš„ã«ã‚¢ãƒ—ãƒªã‚’åˆ©ç”¨ã™ã‚‹éš›ã¯é »åº¦ãŒæ¸›ã‚‹ã‚ˆã†ã«ãªã‚‹
- [è€ƒãˆ: ã‚¢ãƒ—ãƒªãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã€ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ã®ã‚¢ãƒ—ãƒªã«ã‚³ã‚¢æ©Ÿèƒ½ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆæ¨©é™ã‚’ä»˜ä¸ã™ã¹ã](https://blog.eternalstorms.at/2024/08/06/thought-app-review-should-grant-core-function-default-entitlements-to-apps-on-the-app-stores/?utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)
- App Store ã«å‡ºã™å‰ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã„ã‚‹ã‚“ã ã‹ã‚‰ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ¨©é™ã‚’ä¸ãˆã¦ã‚‚ã„ã„ã‚“ã˜ã‚ƒãªã„ï¼Ÿã¨ã„ã†æ¡ˆ
  - [Thought: App Review Should Grant Core\-Function Default Entitlements to Apps on the App Stores](https://blog.eternalstorms.at/2024/08/06/thought-app-review-should-grant-core-function-default-entitlements-to-apps-on-the-app-stores/?utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)
  - å®Ÿéš›ã¯æ‚ªæ„ã®ã‚ã‚‹ã‚¢ãƒ—ãƒªãŒã‚ã‚‹ã‹ã‚‰é›£ã—ã„ã¨ã¯æ‰¿çŸ¥ã—ã¦ã„ã‚‹ã‘ã©ã­
  - ã§ã‚‚ã“ã‚Œã ã¨ App Review ã®å­˜åœ¨ãŒç–‘å•è¦–ã ã‚ˆã¨

## [New requirement for app updates in the EuropeanÂ Union](https://developer.apple.com/news/?id=yfacfeal&utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)

- EU ã®é…ä¿¡è¦ä»¶ã‚’æ›´æ–°ã—ã¦ã„ãªã„äººã¸
- ä»Šæ—¥ã‹ã‚‰ã‚¢ãƒ—ãƒªãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒé…ä¿¡ã•ã‚Œãªããªã‚‹
- ã¾ãŸ 2025/2/17 ã‹ã‚‰ã¯å‰Šé™¤ã¾ã§ã—ã¡ã‚ƒã†ã‚ˆ

## [Apple Push Notification service server certificate update](https://developer.apple.com/news/?id=09za8wzy&utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)

- ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®ã‚µãƒ¼ãƒè¨¼æ˜æ›¸ãŒæ›´æ–°ã•ã‚Œã‚‹
- æ¥å¹´ 1,2 æœˆã«æ›´æ–°ã™ã‚‹ã‹ã‚‰æ–°æ—§ã®ã‚µãƒ¼ãƒè¨¼æ˜æ›¸ã‚’å«ã‚ã‚‹ã‚ˆã†ã«ã—ã¦ã­

## [Beware UserDefaults: a tale of hard to find bugs, and lost data](https://christianselig.com/2024/10/beware-userdefaults/?utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)

- UserDefaultsã«ãƒã‚°ãŒã‚ã‚‹è©±
- ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã‚ˆã£ã¦èª­ã¿å–ã‚‹ã“ã¨ãŒã§ããšã€åˆæœŸå€¤ã¨ã—ã¦å–å¾—ã•ã‚Œã€å‰ã®ãƒ‡ãƒ¼ã‚¿ãŒå¤±ã‚ã‚Œã¦ã—ã¾ã†å ´åˆãŒã‚ã‚‹
- ãƒ‡ãƒã‚¤ã‚¹ãŒãƒ­ãƒƒã‚¯ä¸­ã«ã‚‚ã‚¢ãƒ—ãƒªãŒå‹•ãå ´åˆãŒã‚ã‚‹
  - 1 ã¤ãŒ iOS15 ã‹ã‚‰ã®[prewarming](https://developer.apple.com/documentation/uikit/app_and_environment/responding_to_the_launch_of_your_app/about_the_app_launch_sequence)ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã™ã‚‹å‰ã«ã„ãã¤ã‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã ã‘ã‚’ã‚ã‚‰ã‹ã˜ã‚å®Ÿè¡Œã—ã¦ãŠã

> ãƒ—ãƒ¬ã‚¦ã‚©ãƒ¼ãƒŸãƒ³ã‚°ã¯ã€main() ãŒ UIApplicationMain(:::: :)ã‚’å‘¼ã³å‡ºã™ã¾ã§ã®ã‚¢ãƒ—ãƒªã®èµ·å‹•ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å®Ÿè¡Œã—ã¾ã™ (ãã®å‘¼ã³å‡ºã—ã¯å«ã¾ã‚Œã¾ã›ã‚“)ã€‚

- ä»–ã«ã‚‚ Live Activity ã®å ´åˆ
  - ãƒ‡ãƒã‚¤ã‚¹ã‚’å†èµ·å‹•ã™ã‚‹ã¨ 100%ã§ã‚¢ãƒ—ãƒªãŒãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§èµ·å‹•ã—ã¦ã‚‚ UserDefaults ãŒèª­ã¿å–ã‚Œãªã„
  - æœ€åˆã«ãƒ­ãƒƒã‚¯ãŒè§£é™¤ã•ã‚Œã‚‹ã¾ã§ UserDefaults ãŒæš—å·åŒ–ã•ã‚Œã‚‹
- è§£æ±ºç­–ã‚’è€ƒãˆã‚‹
- [isProtectedDataAvailable](https://developer.apple.com/documentation/uikit/uiapplication/1622925-isprotecteddataavailable)ã‚’è¦‹ã‚‹æ–¹æ³•ãŒã‚ã‚‹ãŒã€å³å¯†ã« UserDefaults ã®åˆ©ç”¨å¯å¦ã¨ä¸€è‡´ã—ãªã„å•é¡ŒãŒã‚ã‚‹
- ç­†è€…ãŒé¸ã‚“ã ã®ã¯UserDefaultsã®ä»£æ›¿ã¨ãªã‚‹ã‚ˆã†ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã“ã«ä¿å­˜ã™ã‚‹æ–¹æ³•
- `App Groups`ã«Identifierã‚’è¨­å®š

![image](https://i.imgur.com/nTZ8u0D.png)

- ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜
- [protectionKey](https://developer.apple.com/documentation/foundation/fileattributekey/1616632-protectionkey)ã‚’ãƒ•ã‚¡ã‚¤ãƒ«å±æ€§ã«è¨­å®šã—ã¦UserDefaultsã®ã‚ˆã†ãªãƒ­ãƒƒã‚¯ã‚’é˜²ã„ã§ã„ã‚‹ã‚ˆã†

```swift
// Example thing to save
let favoriteIceCream = "chocolate"

// Save to your app's shared container directory so it can be accessed by other targets outside main
let appGroupID = ""

// Get the URL for the shared container
guard let containerURL = FileManager.default.containerURL(forSecurityApplicationGroupIdentifier: appGroupID) else {
    fatalError("App Groups not set up correctly")
}

// Create the file URL within the shared container
let fileURL = containerURL.appendingPathComponent("Defaults")
    
do {
    let data = favoriteIceCream.data(using: .utf8)
    try data.write(to: fileURL)

    // No encryption please I'm just storing the name of my digital cow Mister Moo
    try FileManager.default.setAttributes([.protectionKey: .none], ofItemAtPath: fileURL.path) // ã“ã“.none -> 0 as NSNumberã‹ã‚‚?
    print("File saved successfully at \(fileURL)")
} catch {
    print("Error saving file: \(error.localizedDescription)")
}
```

- ã“ã‚“ãªæ„Ÿã˜ã«ä¿å­˜ã•ã‚Œã‚‹

![image](https://i.imgur.com/55vDdBS.png)

- ãã—ã¦ã“ã‚Œã‚’ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚ã‚Šã¾ã™ï¼
- [christianselig/TinyStorage](https://github.com/christianselig/TinyStorage)
- `@AppStorage`ãƒ©ã‚¤ã‚¯ãªã‚‚ã®ã‚‚ç”¨æ„ã•ã‚Œã¦ã„ã¦ä¾¿åˆ©ãã†

![image](https://i.imgur.com/t7pnx0M.png)

- ä¿å­˜ã®ä»•æ–¹ã‚‚`.plist`ã§UserDefaultsãƒ©ã‚¤ã‚¯ã«ãªã£ã¦ã¾ã™

![image](https://i.imgur.com/yUccTis.png)

## [Migrating Combine to AsyncAlgorithms](https://blog.jacobstechtavern.com/p/migrating-combine-to-asyncalgorithms?utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)
- Combineã‚’ä½¿ã£ã¦ã„ã¦ç§»è¡Œã—ãŸããªã„ã‘ã©ã€2021å¹´ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ[swift\-async\-algorithms](https://github.com/apple/swift-async-algorithms)ã§å®Œå…¨ã«Combine < Swift Concurrencyã¨ãªã£ãŸã®ã§ç§»è¡Œã™ã‚‹ã¨ãã®è©±
- (åºæ–‡ä»¥é™ã¯æœªèª­)

## [Reinventing Core Data Development with SwiftData Principles](https://fatbobman.com/en/posts/reinventing-core-data-development-with-swiftdata-principles/?utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)
- iOS18ç¾åœ¨ã€SwiftDataã«ã¯å®‰å®šæ€§ã¨ä¿¡é ¼æ€§ãŒãªã„ã®ã§CoreDataã‚’é¸æŠã—ãŸè©±
- SwiftDataã®ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã‚„Concurrencyã®å„ªã‚ŒãŸç‚¹ã‚’CoreDataã«æ´»ã‹ã™æ–¹æ³•ã‚’æ¢ã‚Šã€ãã®å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦è€ƒãˆã‚‹
- (è©³ã—ã„å®Ÿè£…ã¯æœªèª­)

## [Migrating Combine to AsyncAlgorithms](https://blog.jacobstechtavern.com/p/migrating-combine-to-asyncalgorithms?utm_campaign=iOS%20Dev%20Weekly&utm_medium=web&utm_source=iOS%20Dev%20Weekly%20Issue%20683)

- zip ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ã‚ã‚‹ã‘ã©ã€è§£å‡ã‚’å¿…è¦ã¨ã—ãªã„å ´åˆã¯ API ã§ååˆ†
  - https://github.com/marmelroy/Zip
- (ãŸã—ã‹ã«ç°¡å˜ã«ã¯ã‹ã‘ã‚‹ã®ã¯ã‚ã‹ã‚‹â€¦ã‘ã©ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¾ã‹ã›ãŸããªã£ã¡ã‚ƒã†æ°—ã¯ã™ã‚‹ğŸ˜‚)
